<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0, user-scalable=no"/>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="format-detection" content="telephone=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="white"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Index</title>
    <!--<link rel="stylesheet" href="/Public/index/css/index.css">-->

    <!-- head 中 -->
    <link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.2/style/weui.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/jquery-weui/1.2.0/css/jquery-weui.min.css">


    <script src="/Public/index/js/index.js"></script>
    <script src="https://res.wx.qq.com/open/js/jweixin-1.2.0.js" type="text/javascript" charset="utf-8"></script>

    <script>

        wx.config({
            debug: false, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
            appId: '{$jssdk_arr.appId}', // 必填，公众号的唯一标识
            timestamp: '{$jssdk_arr.timestamp}', // 必填，生成签名的时间戳
            nonceStr: '{$jssdk_arr.nonceStr}', // 必填，生成签名的随机串
            signature: '{$jssdk_arr.signature}',// 必填，签名
            jsApiList: [
                'onMenuShareQQ',
                'onMenuShareWeibo',
                'onMenuShareTimeline',
                'onMenuShareAppMessage'
            ] // 必填，需要使用的JS接口列表
        });

        wx.ready(function () {
//             wx.getLocation({
//                 type: 'wgs84', // 默认为wgs84的gps坐标，如果要返回直接给openLocation用的火星坐标，可传入'gcj02'
//                 success: function (res) {
// //                    var latitude = res.latitude; // 纬度，浮点数，范围为90 ~ -90
// //                    var longitude = res.longitude; // 经度，浮点数，范围为180 ~ -180。
// //                    var speed = res.speed; // 速度，以米/每秒计
// //                    var accuracy = res.accuracy; // 位置精度
//                     wxtranslatePoint(res);
//                     initwx();
//
//                 }
//             });
        });
    </script>
</head>
<body>

<div class="swiper-container" style="width: 100%; height: 180px;" data-space-between='10' data-pagination='.swiper-pagination' data-autoplay="1000">
    <div class="swiper-wrapper">
        <div class="swiper-slide"><img style="height: 180px;width: 100%;" src="/Public/index/images/index-banner.jpg" alt=""></div>
    </div>
</div>

<div id="app">
    <div class="weui-cells" style="margin-top: 0;">
        <div v-for="todo in todos" class="weui-cell">
            <div class="weui-cell__bd">
                <p>{{ todo.text }}</p>
            </div>
            <div class="weui-cell__ft">说明文字</div>
        </div>
    </div>

</div>

</body>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/jquery-weui/1.2.0/js/jquery-weui.min.js"></script>
<script src="https://cdn.bootcss.com/jquery-weui/1.2.0/js/swiper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<!--<script src="https://cdn.bootcss.com/axios/0.18.0/axios.js"></script>-->
<script src="https://cdn.bootcss.com/axios/0.18.0/axios.js"></script>

<script>

    Vue.use(wx);
    var app = new Vue({
        el: '#app',
        data: {
            wx: null,
            lat: '',
            lon: '',
            todos: [
                {text: '学习 JavaScript'},
                {text: '学习 Vue'},
                {text: '整个牛项目'}
            ],
            data: []
        },
        beforeCreate: function () {


        },
        created: function () {
            var that = this;
            wx.ready(function () {
                wx.getLocation({
                    type: 'wgs84', // 默认为wgs84的gps坐标，如果要返回直接给openLocation用的火星坐标，可传入'gcj02'
                    success: function (res) {
                        //alert(JSON.stringify(res));
                        that.lat = res.latitude; // 纬度，浮点数，范围为90 ~ -90
                        that.lon = res.longitude; // 经度，浮点数，范围为180 ~ -180。
                        //alert(that.lon + ',' + that.lat);
                        axios.post('https://pcds.ybshenbian.com/v1/pointlst', {
                            page: '1',
                            mypoint: that.lon + ',' + that.lat
                        }).then(function (response) {
                            console.log(response);
                        }).catch(function (error) {
                            console.log(error);
                        });
                    }
                });
            });

            // `this` 指向 vm 实例
            // https://pcds.ybshenbian.com/v1/pointlst


        }
    });

    $(function () {
        $(".swiper-container").swiper()
    });

</script>
</html>

